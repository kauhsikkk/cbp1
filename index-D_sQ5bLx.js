(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const e of s)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&h(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const e={};return s.integrity&&(e.integrity=s.integrity),s.referrerPolicy&&(e.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?e.credentials="include":s.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function h(s){if(s.ep)return;s.ep=!0;const e=i(s);fetch(s.href,e)}})();class n{constructor(t,i){this.x=t,this.initialX=t,this.y=i,this.initialY=i,this.width=40,this.height=40,this.velocityY=0,this.jumping=!1,this.speed=5,this.hasShield=!1,this.keys={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1}}handleKeyDown(t){this.keys.hasOwnProperty(t.key)&&(this.keys[t.key]=!0,t.preventDefault())}handleKeyUp(t){this.keys.hasOwnProperty(t.key)&&(this.keys[t.key]=!1,t.preventDefault())}update(){this.keys.ArrowUp&&!this.jumping&&(this.velocityY=-15,this.jumping=!0),this.velocityY+=.8,this.y+=this.velocityY,this.y>this.initialY&&(this.y=this.initialY,this.velocityY=0,this.jumping=!1),this.keys.ArrowLeft&&(this.x-=this.speed),this.keys.ArrowRight&&(this.x+=this.speed),this.x=Math.max(0,Math.min(this.x,800-this.width))}draw(t){this.hasShield&&(t.beginPath(),t.arc(this.x+this.width/2,this.y+this.height/2,this.width/1.5,0,Math.PI*2),t.fillStyle="rgba(0, 255, 0, 0.3)",t.fill()),t.fillStyle=this.hasShield?"#00ff00":"#ff0000",t.fillRect(this.x,this.y,this.width,this.height)}checkCollision(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}reset(){this.x=this.initialX,this.y=this.initialY,this.velocityY=0,this.jumping=!1,this.hasShield=!1}}class o{constructor(t,i){this.x=t,this.initialX=t,this.y=i,this.initialY=i,this.width=40,this.height=40,this.speed=2,this.targetY=i}update(t,i){const h=t.x-this.x,s=t.y-this.y;Math.abs(h)>100&&(this.x+=Math.sign(h)*this.speed*i),Math.abs(s)>20&&(this.targetY=t.y);const e=this.targetY-this.y;this.y+=e*.05,this.x=Math.max(0,Math.min(this.x,800-this.width)),this.y=Math.max(0,Math.min(this.y,this.initialY))}draw(t){t.fillStyle="#ff00ff",t.fillRect(this.x,this.y,this.width,this.height)}reset(){this.x=this.initialX,this.y=this.initialY,this.targetY=this.initialY}}class c{constructor(t,i){this.x=t,this.y=i,this.width=20,this.height=20,this.speed=3,this.isCollected=!1}update(){this.x-=this.speed}draw(t){this.isCollected||(t.fillStyle="#00ffff",t.beginPath(),t.arc(this.x+this.width/2,this.y+this.height/2,this.width/2,0,Math.PI*2),t.fill())}collect(t){this.isCollected=!0,t.hasShield=!0,setTimeout(()=>{t.hasShield=!1},5e3)}isOffScreen(){return this.x+this.width<0}}class d{constructor(t,i,h){this.x=t,this.y=i,this.width=20,this.height=40,this.baseSpeed=5,this.speed=this.baseSpeed*h}update(){this.x-=this.speed}draw(t){t.fillStyle="#ff8c00",t.fillRect(this.x,this.y,this.width,this.height)}isOffScreen(){return this.x+this.width<0}}class f{constructor(t,i){this.canvas=t,this.ctx=i,this.player=new n(50,this.canvas.height-60),this.enemy=new o(this.canvas.width-50,this.canvas.height-60),this.obstacles=[],this.powerUps=[],this.score=0,this.gameOver=!1,this.animationId=null,this.lastObstacleTime=0,this.lastPowerUpTime=0,this.difficulty=1,this.bindEvents()}bindEvents(){document.addEventListener("keydown",t=>this.player.handleKeyDown(t)),document.addEventListener("keyup",t=>this.player.handleKeyUp(t)),document.getElementById("restartButton").addEventListener("click",()=>this.restart())}start(){this.gameLoop()}update(){if(this.gameOver)return;this.score++,this.difficulty=1+Math.floor(this.score/500)*.2,document.getElementById("score").textContent=`Score: ${this.score}`,this.player.update(),this.enemy.update(this.player,this.difficulty);const t=Math.max(2e3-this.difficulty*200,1e3);Date.now()-this.lastObstacleTime>t&&(this.obstacles.push(new d(this.canvas.width,this.canvas.height-40,this.difficulty)),this.lastObstacleTime=Date.now()),Date.now()-this.lastPowerUpTime>5e3&&(this.powerUps.push(new c(this.canvas.width,Math.random()*(this.canvas.height-150)+50)),this.lastPowerUpTime=Date.now()),this.obstacles=this.obstacles.filter(i=>(i.update(),!i.isOffScreen())),this.powerUps=this.powerUps.filter(i=>(i.update(),!i.isCollected&&!i.isOffScreen())),this.checkCollisions()}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#333",this.ctx.fillRect(0,this.canvas.height-20,this.canvas.width,20),this.player.draw(this.ctx),this.enemy.draw(this.ctx),this.obstacles.forEach(t=>t.draw(this.ctx)),this.powerUps.forEach(t=>t.draw(this.ctx))}checkCollisions(){this.player.hasShield||(this.player.checkCollision(this.enemy)&&this.endGame(),this.obstacles.forEach(t=>{this.player.checkCollision(t)&&this.endGame()})),this.powerUps.forEach(t=>{!t.isCollected&&this.player.checkCollision(t)&&t.collect(this.player)})}gameLoop(){this.update(),this.draw(),this.gameOver||(this.animationId=requestAnimationFrame(()=>this.gameLoop()))}endGame(){this.gameOver=!0,document.getElementById("gameOver").classList.remove("hidden"),document.getElementById("finalScore").textContent=this.score}restart(){this.gameOver=!1,this.score=0,this.difficulty=1,this.obstacles=[],this.powerUps=[],this.player.reset(),this.enemy.reset(),document.getElementById("gameOver").classList.add("hidden"),this.start()}}const r=document.getElementById("gameCanvas"),y=r.getContext("2d");r.width=800;r.height=400;const u=new f(r,y);u.start();
